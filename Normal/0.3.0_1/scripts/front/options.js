function showDomainList(e){$("#domainList").html("");while(e.length<6)e.push("&nbsp;");$.each(e,function(e,t){if(!t)return;!_cu.isVip();var n='<div class="col-md-6">'+t+'<i data="'+t+'" class="fa fa-trash-o domainTrash"></i></div>';_cu.isVip()||(n='<div class="col-md-6">'+t+"</div>"),$(n).appendTo($("#domainList"))});if(e.length%2==1){var t='<div id="blankDomain" class="col-md-6"> &nbsp;</div>';$(t).appendTo($("#domainList"))}$("#domainList .domainTrash").click(function(e){var t=$(e.target).attr("data"),n=[];n.push(t),userManager.removeDomain(n),$(e.target).parent().remove();var r=_cu.getUserDomains();r.sort(),showDomainList(r)})}function showFreeDomainList(e){$("#freeDomainList").html(""),$.each(e,function(e,t){if(!t)return;var n='<div class="col-md-6">'+t+"</div>";$(n).appendTo($("#freeDomainList"))});if(e.length%2==1){var t='<div id="blankDomain" class="col-md-6"> &nbsp;</div>';$(t).appendTo($("#freeDomainList"))}$("#freeDomainListDiv").show()}function checkVip(){return _cu.isVip()?!0:(showAlert("opNeedVip",8),!1)}function showOrderList(){var e=_cf.getOrderListUrl();$.get(e,function(e){e.code==0&&$.each(e.orders,function(e,t){var n="<tr><td>"+t.bid+"</td><td>"+t.cdate+"</td> <td>"+t.serviceDays+"</td> <td>"+t.paymentMethod+"</td><td>"+t.amount+"</td> <th>"+t.status+"</th></tr>";$(n).appendTo($("#orderListContent"))})},"json")}function hashchanged(){var e=location.hash.replace(/^#/,"");"order"===e?($("#secOrder").show(),$("#secDomain").hide()):($("#secOrder").hide(),$("#secDomain").show())}_cu.isGuest()&&(window.location.href="login.html"),$(function(){$(window).hashchange(hashchanged),hashchanged(),showOrderList(),getUrlParam("from")=="register"&&showInfo("opMsgRegisterLoginSuccess",8),getUrlParam("from")=="login"&&showInfo("opMsgLoginSuccess",8),getUrlParam("from")=="changePass"&&showInfo("opChangePassSuccess",8);var e=_cu.getUserDomains();e.sort(),showDomainList(e),$("#btn_search").click(function(t){var n=$("#txt_searchAdd").val().trim(),r=$.grep(e,function(e,t){return e.indexOf(n)>=0});showDomainList(r)}),$("#txt_searchAdd").keyup(function(){var t=$("#txt_searchAdd").val().trim();(!t||t.length==0)&&showDomainList(e)}),$("#btn_add").click(function(){if(!checkVip())return;var t=$("#txt_searchAdd").val().trim();if(t.length==0)return;var n=pageUtil.getValidDomain(t);if(n){var r=[];r.push(n),userManager.addDomain(r,function(){r=_cu.getUserDomains(),r.sort(),showDomainList(r),$("#txt_searchAdd").val(""),showInfo("domainAdded",3)})}else showAlert("Domain_invalid",5)}),$("#btn_buyVip").click(function(){paymentManager.startPay(window)}),$("#span_vipDays").html(_cu.expireDays),(!_cu.expireDays||_cu.expireDays<10)&&$(".vipInfoDiv").addClass("warning");var t=chrome.i18n.getMessage("opDomainWhitList");if(!_cu.isVip()){var n=_cu.getDomains();n.sort(),showFreeDomainList(n),t+=chrome.i18n.getMessage("op_domain_vip_tip"),$("#vipDomainListDiv").addClass("greyColor")}$("#domainTip").html(t)});