// Parse a URL. Based upon http://blog.stevenlevithan.com/archives/parseuri
// parseUri 1.2.2, (c) Steven Levithan <stevenlevithan.com>, MIT License
// Inputs: url: the URL you want to parse
// Outputs: object containing all parts of |url| as attributes

VERBOSE_DEBUG=!0,window.location.origin+"/"===chrome.extension.getURL("")&&window.top!==window&&window.location.replace("about:blank"),BGcall=function(){var e=[];for(var t=0;t<arguments.length;t++)e.push(arguments[t]);var n=e.shift(),r=typeof e[e.length-1]=="function",i=r?e.pop():function(){};chrome.extension.sendRequest({command:"call",fn:n,args:e},i)},logging=function(e){e?(log=function(){(VERBOSE_DEBUG||arguments[0]!="[DEBUG]")&&console.log.apply(console,arguments)},logGroup=function(){console.group.apply(console,arguments)},logGroupEnd=function(){console.groupEnd()}):log=logGroup=logGroupEnd=function(){}},logging(!1),onReady=function(e){document.readyState==="complete"?window.setTimeout(e,0):window.addEventListener("load",e,!1)},translate=function(e,t){return chrome.i18n.getMessage(e,t)},localizePage=function(){$("[i18n]:not(.i18n-replaced)").each(function(){$(this).html(translate($(this).attr("i18n")))}),$("[i18n_value]:not(.i18n-replaced)").each(function(){$(this).val(translate($(this).attr("i18n_value")))}),$("[i18n_title]:not(.i18n-replaced)").each(function(){$(this).attr("title",translate($(this).attr("i18n_title")))}),$("[i18n_placeholder]:not(.i18n-replaced)").each(function(){$(this).attr("placeholder",translate($(this).attr("i18n_placeholder")))}),$("[i18n_replacement_el]:not(.i18n-replaced)").each(function(){var e=$("a",this),t=e.text(),n=$("#"+$(this).attr("i18n_replacement_el"));n.text(t).val(t).replaceAll(e),$(this).addClass("i18n-replaced")})},parseUri=function(e){var t=/^(([^:]+(?::|$))(?:(?:\w+:)?\/\/)?(?:[^:@\/]*(?::[^:@\/]*)?@)?(([^:\/?#]*)(?::(\d*))?))((?:[^?#\/]*\/)*[^?#]*)(\?[^#]*)?(\#.*)?/.exec(e),n=["href","origin","protocol","host","hostname","port","pathname","search","hash"],r={};for(var i=0;i<n.length;i++)r[n[i]]=t[i]||"";return r},parseUri.parseSearch=function(e){var t={};return e.replace(/(?:^\?|&)([^&=]*)=?([^&]*)/g,function(){arguments[1]&&(t[arguments[1]]=unescape(arguments[2]))}),t},parseUri.secondLevelDomainOnly=function(e,t){var n=e.match(/([^\.]+\.(?:co\.)?[^\.]+)\.?$/)||[e,e];return n[t?0:1].toLowerCase()},storage_get=function(e){var t=window.SAFARI?safari.extension.settings:localStorage,n=t.getItem(e);if(n==null)return undefined;try{return JSON.parse(n)}catch(r){return log("Couldn't parse json for "+e),undefined}},storage_set=function(e,t){var n=window.SAFARI?safari.extension.settings:localStorage;if(t===undefined){n.removeItem(e);return}try{n.setItem(e,JSON.stringify(t))}catch(r){r.name=="QUOTA_EXCEEDED_ERR"&&!SAFARI&&(alert(translate("storage_quota_exceeded")),openTab("options/index.html#ui-tabs-2"))}},setDefault=function(e,t,n){return e[t]===undefined&&(e[t]=n),e[t]},$(localizePage);